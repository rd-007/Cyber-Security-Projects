# Real-Time Phishing URL Detector â€“ Full Build Guide

This document expands on the quick-start snippet and walks you through **every step** â€“ from cloning the repo to running the browser extension â€“ using only free, local resources.

---

## 0. Prerequisites

* Python **3.11** (check with `python --version`)
* Git (optional, for cloning)
* Google Chrome / Microsoft Edge for the extension (Manifest v3 compliant)
* Windows PowerShell / CMD / *nix shell â€“ commands below use POSIX syntax; adapt paths as needed.

---

## 1. Obtain the source code

```bash
# Option A â€“ already inside the target directory (generated by Cascade):
cd phishing_detector

# Option B â€“ cloning later from GitHub (if you publish):
# git clone https://github.com/<you>/phishing_detector.git && cd phishing_detector
```

---

## 2. Create and activate a virtual environment

```bash
python -m venv .venv
# Windows PowerShell
.venv\Scripts\Activate.ps1
# macOS/Linux
source .venv/bin/activate
```

You should see `(.venv)` prefix in your prompt.

---

## 3. Install dependencies

```bash
pip install -r requirements.txt
```

> If GPU/CPU ML wheels fail to build, add `--upgrade pip setuptools wheel` first.

---

## 4. Verify the dummy model loads

```bash
python - << 'PY'
from phishlib import classify_url
print(classify_url("https://example.com"))
PY
```

You should see `('benign', 0.0)` â€“ the starter model always predicts *benign* until retrained.

---

## 5. Run unit tests (optional)

```bash
pytest -q
```

---

## 6. Use the CLI

```bash
# Single URL
python -m cli scan https://www.paypal.com.login.verify-session-id.ru

# Batch via PowerShell pipeline
Get-Content urls.txt | ForEach-Object { python -m cli scan $_ }
```

---

## 7. Launch the REST API

```bash
uvicorn api.main:app --reload --port 8000
```

* Open `http://localhost:8000/docs` for interactive Swagger UI.
* Example request:
  ```bash
  curl -X POST http://localhost:8000/scan -H "Content-Type: application/json" -d '{"url": "https://malicious.co"}'
  ```

---

## 8. Install the browser extension

1. Build/pack step is not required â€“ the extension is static.
2. In Chrome/Edge, navigate to `chrome://extensions` (or `edge://extensions`).
3. Enable **Developer mode**.
4. Click **Load unpacked** and select the `extension/` folder inside the project.
5. The popup will indicate *Connected* if the API is running on `localhost:8000`.

---

## 9. Retrain the model (optional but recommended)

> A dummy baseline ships by default. To improve detection accuracy:

```bash
python -m data.train --dataset data/phish_train.csv --output phishlib/_model.pkl
```

The script will:
1. Load labelled URLs â†’ extract feature dicts.
2. Train a `LogisticRegression(max_iter=1000)`.
3. Persist the `DictVectorizer`+model pipeline to `phishlib/_model.pkl` (auto-loaded).

---

## 10. Package & deploy

* **Docker (local CI / prod):**
  ```Dockerfile
  FROM python:3.11-slim
  WORKDIR /app
  COPY . .
  RUN pip install --no-cache-dir -r requirements.txt
  EXPOSE 8000
  CMD ["uvicorn", "api.main:app", "--host", "0.0.0.0", "--port", "8000"]
  ```
  Build & run:
  ```bash
  docker build -t phishing-detector .
  docker run -p 8000:8000 phishing-detector
  ```
* **PyPI wheel (library only):** add `setup.cfg` + `pyproject.toml`.

---

## 11. Next steps / improvements

* Expand feature set (WHOIS age, SSL cert fields, language models on page text).
* Replace classical model with lightweight BERT-style text classifier.
* Add alerting (email / webhook) for high-confidence phishing hits.
* Write more unit tests & a GitHub Actions CI pipeline.

---

Happy hacking! ðŸŽ£
